<div class="board-container">
  <mat-card>
    <mat-card-content>
      <!-- Loading Spinner -->
      <div *ngIf="isLoading; else gameContent" class="loading-container">
        <mat-spinner></mat-spinner>
        <p>Fetching Pok√©mon cards...</p>
      </div>

      <!-- Main Game Content -->
      <ng-template #gameContent>
        <div class="game-layout">
          <!-- Scoreboard -->
          <div class="scoreboard">
            <h2>Scores</h2>
            <div
              *ngFor="let player of players; let i = index"
              class="player-score"
              [class.active-player]="i === currentPlayerIndex"
            >
              <mat-icon>person</mat-icon>
              <span>{{ player.name }}: {{ player.score }}</span>
            </div>
            <p *ngIf="numPlayers > 1" class="turn-indicator">
              Turn: {{ players[currentPlayerIndex]?.name }}
            </p>
          </div>

          <!-- Game Grid -->
          <div class="game-grid">
            <div
              *ngFor="let card of gameCards"
              class="card"
              [class.flipped]="card.state === 'flipped' || card.state === 'matched'"
              [class.matched]="card.state === 'matched'"
              (click)="flipCard(card)"
            >
              <div class="card-face card-back">
                <img
                  src="https://assets.pokemon.com/assets/cms2/img/misc/gus/buttons/logo-pokemon-79x45.png"
                  alt="Card Back"
                />
              </div>
              <div class="card-face card-front">
                <img [src]="card.images.small" [alt]="card.name" />
              </div>
            </div>
          </div>
        </div>

        <!-- Game Over Overlay -->
        <div *ngIf="isGameOver" class="game-over-overlay">
          <div class="game-over-content">
            <h1>Game Over!</h1>
            <h3>Final Scores:</h3>
            <div *ngFor="let player of players" class="final-score">
              <span>{{ player.name }}: {{ player.score }}</span>
            </div>
            <div class="game-over-actions">
              <button mat-raised-button color="primary" (click)="resetGame()">Play Again</button>
              <button mat-stroked-button color="accent" (click)="goHome()">New Game</button>
            </div>
          </div>
        </div>
      </ng-template>
    </mat-card-content>
  </mat-card>
</div>
